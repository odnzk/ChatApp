# TFS Android 2023: ChatApp

## Описание

Приложение для обмена сообщениями, мобильный клиент для Zulip API.

## Функционал

- [X] Single Activity
- [X] Многомодульная архитектура
- [X] Светлая и темная тема
- [X] Возможность создать свой канал(кнопка "+" на экране с каналами `ChannelsFragment`)
- [X] Bозможность открыть сообщения и для канала(**лонг тап** на канал в `ChannelsFragment`), и для
  топика(клик на топик в `ChannelsFragment`)
- [X] Bозможность писать в разные топики(только с **чата канала** в `ChatFragment`)
- [X] Bозможность перейти в топик канала из **чата канала** в `ChatFragment` (клик на топик)
- [X] Возможность поставить реакцию, удалить, отредактировать и скопировать сообщение(лонг тап на
  сообщение в `ChatFragment`)

## Требования

Для полноценной работы с Zulip API, использующемся в приложении, необходим API-ключ.
[Как получить API-ключ](https://zulip.com/api/api-keys).
После получения ключа необходимо дописать следующие строки в файл `local.properties`:

```
username=<логин>
password=<API-ключ>
base_url="https://tinkoff-android-spring-2023.zulipchat.com"
```

## Архитектура

Приложение следует принципам чистой архитектуры, слой представления реализует UDF архитектуру с
помощью библиотеки `Elmslie`.
**Пример** реализации модуля `feature:channels`

![ChatApp-Architecture](../images/Acrhitecture.png)

## Модуляризация

| Модуль             | Тип модуля          | Описание                                                                                                                                                        |
|--------------------|---------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `:app`             | Android Application | Объединяет все необходимое для корректной работы приложения.                                                                                                    |
| `core:common`      | Java/Kotlin Library | Общие классы, для использования другими модулями.                                                                                                                  |
| `core:components`  | Android Library     | Компоненты пользовательского интерфейса, функции расширения, базовые классы.                                                                                            |
| `core:network`     | Android Library     | API для обработки сетевых запросов и ответов от удаленного источника данных.                                                                                    |
| `core:database`    | Android Library     | Реализация локальной базы данных с помощью библиотеки `Room`.                                                                                                   |
| `core:auth`        | Android Library     | Классы, отвечающие за логику авторизации.                                                                                                                       |
| `core:ui`          | Android Library     | Ресурсы, используемые модулями.                                                                                                                     |
| `feature:channels` | Android Library     | Отображение каналов с помощью `ChannelFragment` и `HolderChannelFragment`, возможность добавить канал (`AddChannelFragment`).                                                               |
| `feature:chat`     | Android Library     | Отображение сообщений канала/топика (`ChatFragment`), возможность изменить сообщение (`ActionsFragment` и `EditMessageFragment`), выбор эмоджи для добавления реакции (`SelectEmojiFragment`). |
| `feature:profile`  | Android Library     | Отображение профиля пользователя с помощью `ProfileFragment`.                                                                                                    |
| `feature:users`    | Android Library     | Отображение сведений обо всех пользователях в организации с помощью `UsersFragment`.                                                                             |

## Технологии

- **Coroutines, Flow** - Асинхронная работа.
- **Retrofit2** - Запросы в сеть.
- **OkHttp** - Запросы в сеть.
- **Kotlinx Serialization** - Сериализация данных.
- **Coil** - Загрузка изображений по сети, кэширование загруженный изображений.
- **Jetpack Paging 3** - Загрузка данных небольшими частями.
- **Android Navigation Component** - Навигация по приложению.
- **ViewBinding** - Улучшение и оптимизация кода, связанного со слоем представления.
- **Shimmer** - Отображение зарузки данных.
- **Dagger2** - Внедрение зависимостей.
- **Elmslie** - Упрощение реализации ELM-архитектуры.
- **Room** - Уровень абстракции поверх SQLite, позволяющий осуществлять свободный доступ к базе
  данных.
- **DataStore** - Хранение данных в виде пар ключ-значение с использованием Coroutines и Flow.
- **Timber** - Logger, предоставляющий утилиту поверх обычного класса Log.
- **Leak Canary** - Обнаружение утечек памяти.

## Скриншоты

### Светлая тема

![ChatApp-LightTheme](../images/screeenshots_light_theme.png)

### Темная тема

![ChatApp-DarkTheme](../images/screeenshots_dark_theme.png)
